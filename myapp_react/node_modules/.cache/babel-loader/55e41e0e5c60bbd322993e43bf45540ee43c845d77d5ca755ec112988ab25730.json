{"ast":null,"code":"import _slicedToArray from\"C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/myapp_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// LoginPage.tsx\nimport React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),rows=_useState6[0],setRows=_useState6[1];var navigate=useNavigate();useEffect(function(){axios.get('/api/auth/').then(function(response){setRows(response.data);});},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();var admin=rows.find(function(row){return row.username===username&&row.password===password;});if(admin){onLogin(username,password);navigate('/admin');}else{alert('Неверное имя пользователя или пароль');}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:'1rem'},children:\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u0432\\u0445\\u043E\\u0434\\u0430\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:'flex',flexDirection:'column',gap:'1rem',width:'300px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},style:{padding:'0.5rem',fontSize:'1rem'}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},style:{padding:'0.5rem',fontSize:'1rem'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","_ref","onLogin","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","rows","setRows","navigate","get","then","response","data","handleSubmit","event","preventDefault","admin","find","row","alert","style","display","flexDirection","alignItems","justifyContent","height","children","marginBottom","onSubmit","gap","width","type","value","onChange","e","target","padding","fontSize","className"],"sources":["C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/myapp_react/src/pages/LoginPage.tsx"],"sourcesContent":["// LoginPage.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface LoginPageProps {\r\n  onLogin: (username: string, password: string) => void;\r\n}\r\n\r\ntype admins = {\r\n  admin_id: number;\r\n  username: string;\r\n  password: string;\r\n};\r\n\r\nconst LoginPage: React.FC<LoginPageProps> = ({ onLogin }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [rows, setRows] = useState<admins[]>([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/auth/')\r\n      .then(response => {\r\n        setRows(response.data);\r\n      });\r\n  }, []);\r\n\r\n  const handleSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    const admin = rows.find(row => row.username === username && row.password === password);\r\n    if (admin) {\r\n      onLogin(username, password);\r\n      navigate('/admin');\r\n    } else {\r\n      alert('Неверное имя пользователя или пароль');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100vh' }}>\r\n      <h1 style={{ marginBottom: '1rem' }}>Страница входа</h1>\r\n      <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem', width: '300px' }}>\r\n        <input type=\"text\" value={username} onChange={e => setUsername(e.target.value)} style={{ padding: '0.5rem', fontSize: '1rem' }} />\r\n        <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} style={{ padding: '0.5rem', fontSize: '1rem' }} />\r\n        <button type=\"submit\" className=\"login-button\">Войти</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}