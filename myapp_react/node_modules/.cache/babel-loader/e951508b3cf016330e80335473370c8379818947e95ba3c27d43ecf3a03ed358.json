{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// pages/HomePage.tsx\nimport React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';// Добавьте эту строку\nimport'./HomePage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useState=useState({key:'name',direction:'ascending'}),_useState2=_slicedToArray(_useState,2),sortConfig=_useState2[0],setSortConfig=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),rows=_useState4[0],setRows=_useState4[1];useEffect(function(){axios.get('/api/data/').then(function(response){setRows(response.data);});},[]);useEffect(function(){var sortArray=function sortArray(type){var types={name:'name',room:'room'};var sortProperty=types[type];var sorted=_toConsumableArray(rows).sort(function(a,b){return a[sortProperty].localeCompare(b[sortProperty]);});if(sortConfig.direction==='descending')sorted.reverse();return sorted;};if(sortConfig.key){var sortedData=sortArray(sortConfig.key);setRows(sortedData);}},[sortConfig]);var requestSort=function requestSort(key){var direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}setSortConfig({key:key,direction:direction});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Login-div\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-button\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"home-page__title\",children:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{className:\"home-page__info\",children:\"\\u0416\\u0438\\u0442\\u0435\\u043B\\u0438 \\u044D\\u0442\\u043E\\u0433\\u043E \\u043E\\u0431\\u0449\\u0430\\u0436\\u043D\\u043E\\u0433\\u043E \\u0430\\u0434\\u0430.\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return requestSort('name');},children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return requestSort('room');},children:\"\\u041A\\u043E\\u043C\\u043D\\u0430\\u0442\\u0430\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(function(row,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.name}),/*#__PURE__*/_jsx(\"td\",{children:row.room})]},index);})})]})]})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsx","_jsx","jsxs","_jsxs","HomePage","_useState","key","direction","_useState2","_slicedToArray","sortConfig","setSortConfig","_useState3","_useState4","rows","setRows","get","then","response","data","sortArray","type","types","name","room","sortProperty","sorted","_toConsumableArray","sort","a","b","localeCompare","reverse","sortedData","requestSort","children","className","to","onClick","map","row","index"],"sources":["C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/src/pages/HomePage.tsx"],"sourcesContent":["// pages/HomePage.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom'; // Добавьте эту строку\r\nimport './HomePage.css';\r\n\r\ntype SortConfig = {\r\n  key: 'name' | 'room';\r\n  direction: 'ascending' | 'descending';\r\n};\r\n\r\ntype Row = {\r\n  name: string;\r\n  room: string;\r\n};\r\n\r\nconst HomePage: React.FC = () => {\r\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'name', direction: 'ascending' });\r\n  const [rows, setRows] = useState<Row[]>([]);\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/data/')\r\n      .then(response => {\r\n        setRows(response.data);\r\n      });\r\n  }, []);\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    const sortArray = (type: 'name' | 'room') => {\r\n      const types = {\r\n        name: 'name',\r\n        room: 'room',\r\n      };\r\n      const sortProperty = types[type];\r\n      const sorted = [...rows].sort((a, b) => a[sortProperty as keyof Row].localeCompare(b[sortProperty as keyof Row]));\r\n      if (sortConfig.direction === 'descending') sorted.reverse();\r\n      return sorted;\r\n    };\r\n\r\n    if (sortConfig.key) {\r\n      const sortedData = sortArray(sortConfig.key);\r\n      setRows(sortedData);\r\n    }\r\n  }, [sortConfig]);\r\n\r\n  const requestSort = (key: 'name' | 'room') => {\r\n    let direction: 'ascending' | 'descending' = 'ascending';\r\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n      direction = 'descending';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  return (\r\n    <div >\r\n      <div className=\"Login-div\">\r\n        <Link to=\"/login\" className=\"login-button\">Войти</Link>\r\n      </div>\r\n      <div className=\"home-page\">\r\n      <h1 className=\"home-page__title\">Добро пожаловать на главную страницу</h1>\r\n      <p className=\"home-page__info\">\r\n        Жители этого общажного ада.\r\n      </p>\r\n      \r\n      {/* <Link to=\"/login\" className=\"login-button\">Войти</Link> */}\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th onClick={() => requestSort('name')}>Имя</th>\r\n            <th onClick={() => requestSort('room')}>Комната</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {rows.map((row, index) => (\r\n            <tr key={index}>\r\n              <td>{row.name}</td>\r\n              <td>{row.room}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}