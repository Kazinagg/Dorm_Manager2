{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import'./HomePage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useState=useState({key:'first_name',direction:'ascending'}),_useState2=_slicedToArray(_useState,2),sortConfig=_useState2[0],setSortConfig=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),rows=_useState4[0],setRows=_useState4[1];useEffect(function(){axios.get('/api/data/').then(function(response){setRows(response.data);});},[]);useEffect(function(){var sortArray=function sortArray(type){var sorted=_toConsumableArray(rows).sort(function(a,b){if(typeof a[type]==='number'&&typeof b[type]==='number'){return a[type]-b[type];}if(typeof a[type]==='string'&&typeof b[type]==='string'){return a[type].localeCompare(b[type]);}return 0;});if(sortConfig.direction==='descending')sorted.reverse();return sorted;};if(sortConfig.key){var sortedData=sortArray(sortConfig.key);setRows(sortedData);}},[sortConfig]);var requestSort=function requestSort(key){var direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}setSortConfig({key:key,direction:direction});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Login-div\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-button\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"home-page__title\",children:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{className:\"home-page__info\",children:\"\\u0416\\u0438\\u0442\\u0435\\u043B\\u0438 \\u044D\\u0442\\u043E\\u0433\\u043E \\u043E\\u0431\\u0449\\u0430\\u0436\\u043D\\u043E\\u0433\\u043E \\u0430\\u0434\\u0430.\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return requestSort('first_name');},children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return requestSort('last_name');},children:\"Last Name\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(function(row,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.first_name}),/*#__PURE__*/_jsx(\"td\",{children:row.last_name})]},index);})})]})]})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsx","_jsx","jsxs","_jsxs","HomePage","_useState","key","direction","_useState2","_slicedToArray","sortConfig","setSortConfig","_useState3","_useState4","rows","setRows","get","then","response","data","sortArray","type","sorted","_toConsumableArray","sort","a","b","localeCompare","reverse","sortedData","requestSort","children","className","to","onClick","map","row","index","first_name","last_name"],"sources":["C:/Users/Kazinagg/OneDrive/BSU/Practika/Dorm_Manager2/Dorm_Manager2/dorm_manager2_django/myapp_react/src/pages/HomePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport './HomePage.css';\r\n\r\ntype Student = {\r\n  student_id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  birth_date: string;\r\n  gender: string;\r\n  country_id: number;\r\n  phone: string;\r\n  email: string;\r\n};\r\n\r\ntype SortConfig = {\r\n  key: keyof Student;\r\n  direction: 'ascending' | 'descending';\r\n};\r\n\r\nconst HomePage: React.FC = () => {\r\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'first_name', direction: 'ascending' });\r\n  const [rows, setRows] = useState<Student[]>([]);\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/data/')\r\n      .then(response => {\r\n        setRows(response.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const sortArray = (type: keyof Student) => {\r\n      const sorted = [...rows].sort((a, b) => {\r\n        if (typeof a[type] === 'number' && typeof b[type] === 'number') {\r\n          return (a[type] as number) - (b[type] as number);\r\n        }\r\n        if (typeof a[type] === 'string' && typeof b[type] === 'string') {\r\n          return (a[type] as string).localeCompare(b[type] as string);\r\n        }\r\n        return 0;\r\n      });\r\n      if (sortConfig.direction === 'descending') sorted.reverse();\r\n      return sorted;\r\n    };\r\n    \r\n\r\n    if (sortConfig.key) {\r\n      const sortedData = sortArray(sortConfig.key);\r\n      setRows(sortedData);\r\n    }\r\n  }, [sortConfig]);\r\n\r\n  const requestSort = (key: keyof Student) => {\r\n    let direction: 'ascending' | 'descending' = 'ascending';\r\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n      direction = 'descending';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"Login-div\">\r\n        <Link to=\"/login\" className=\"login-button\">Войти</Link>\r\n      </div>\r\n      <div className=\"home-page\">\r\n        <h1 className=\"home-page__title\">Добро пожаловать на главную страницу</h1>\r\n        <p className=\"home-page__info\">\r\n          Жители этого общажного ада.\r\n        </p>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th onClick={() => requestSort('first_name')}>First Name</th>\r\n              <th onClick={() => requestSort('last_name')}>Last Name</th>\r\n              {/* Добавьте другие столбцы по мере необходимости */}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((row, index) => (\r\n              <tr key={index}>\r\n                <td>{row.first_name}</td>\r\n                <td>{row.last_name}</td>\r\n                {/* Добавьте другие ячейки по мере необходимости */}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}